<div class="contenedor">
  <h2>{{ id ? 'Editar' : 'Nuevo' }} producto</h2>

  <div class="alerta error" *ngIf="error">{{ error }}</div>
  <div class="alerta ok" *ngIf="ok">{{ ok }}</div>

  <form [formGroup]="formulario" (ngSubmit)="guardar()" class="formulario">
    <div class="grid">
      <label>Nombre
        <input type="text" formControlName="nombre" placeholder="Ej: Teclado mecánico" />
      </label>

      <label>Precio
        <input type="number" step="0.01" formControlName="precio" />
      </label>

      <label>Categoría
        <select formControlName="categoriaId">
          <option [ngValue]="null">Sin categoría</option>
          <option *ngFor="let c of categorias" [ngValue]="c.id">{{ c.nombre }}</option>
        </select>
      </label>

      <label>Descripción
        <textarea rows="4" formControlName="descripcion" placeholder="Opcional"></textarea>
      </label>

      <label>Imagen
        <input type="file" (change)="onArchivo($event)" accept="image/*" />
      </label>

      <div class="preview" *ngIf="preview">
        <img [src]="preview" alt="preview">
      </div>
    </div>

    <div class="acciones">
      <a routerLink="/productos">Cancelar</a>
      <button type="submit">{{ id ? 'Actualizar' : 'Guardar' }}</button>
    </div>
  </form>
</div>
